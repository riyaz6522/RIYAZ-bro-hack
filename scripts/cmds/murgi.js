const delay = (ms) => new Promise(res => setTimeout(res, ms));
const activeFun = new Map();

module.exports = {
  config: {
    name: "murgi",
    version: "1.0.0",
    role: 0,
    author: "AI",
    description: "Fun mention loop",
    category: "murgi",
    usages: "@mention | off",
    cooldowns: 5,
  },

  onStart: async function({ message, event, args }) {
    // ржмржирзНржз ржХрж░рж╛рж░ ржХржорж╛ржирзНржб
    if (args[0] === "off") {
      activeFun.delete(event.threadID);
      return message.reply("ржЖржмрзНржмрзБ ржбрж╛ржХ рждрж╛рж╣рж▓рзЗ ржорж╛ржл ржХрж░рзЗ ржжрж┐ржмрзЛ");
    }

    // ржХрж╛ржЙржХрзЗ ржорзЗржирж╢ржи ржирж╛ ржХрж░рж▓рзЗ ржПрж░рж░ ржжрж┐ржмрзЗ
    const mention = Object.keys(event.mentions)[0];
    if (!mention) return message.reply("ржХрж╛ржЙржХрзЗ ржорзЗржирж╢ржи ржХрж░рзЛ ЁЯШД");

    // ржЕрж▓рж░рзЗржбрж┐ ржЪрж▓рж▓рзЗ ржирждрзБржи ржХрж░рзЗ рж╢рзБрж░рзБ рж╣ржмрзЗ ржирж╛
    if (activeFun.get(event.threadID)) return message.reply("тЪая╕П ржПржЯрж╛ ржЕрж▓рж░рзЗржбрж┐ ржЪрж▓ржЫрзЗ!");

    const name = event.mentions[mention];
    const tag = [{ id: mention, tag: name }];

    const messages = [
      "ржЦрж╛*ржиржХрж┐рж░ ржкрзЛрж▓рж╛ рж░рзЗржбрж┐ рждрзЛ ржЪрзБ*ржжрж╛ ржЦрж╛ржУрзЯрж╛рж░ ржЬржирзНржпЁЯСЕЁЯШИ",
      "ржПржЦржи рждрзЛрж░ ржорж╛рж░ ржжрзБржз ржжрж░рзЗ ржШрзБржорж╛ржорзБ рж╕ржХрж╛рж▓рзЗ рждрзЛрж░ ржмрж╛ржкрж░рзЗ ржкрзБржХржЯрж┐ ржорж╛рж░рждрзЗ ржЬрж╛ржорзБ ржЧрзБржб ржирж╛ржЗржЯ ржЫрзЛржЯЁЯТЛЁЯСЕЁЯШЪ",
      "рж╢рзБржи ржЦрж╛ржиржХрж┐рж░ ржкрзЛрж▓рж╛ ржЗржбрзЗржЯ ржХрж░рждрзЗ ржХрж░рждрзЗ ржоржЗрж░рж╛ ржпрж╛ ржкрзЛрж╕рзНржЯ ржХржЗрж░рж╛ ржлрзЗржорж╛рж╕ ржХрж░ ржЖржорж╛рж░рзЗЁЯСЕЁЯЦХЁЯЩД",
      "ржЧрж╛рж▓рж╛ржЧрж╛рж▓рж┐ ржХрж░рждрзЗ ржХрж░рждрзЗ рждрзЛрж░ ржмрзБрж░рж┐ ржорж╛рж░рзЗ рж╕рж╕рзНрждрж╛ ржмрж╛ржирж┐рзЯрзЗ ржлрзЗрж▓ржЫрж╕ЁЯСЕЁЯТЛ",
      "ржПржЗ ржЗрж╣рзБржжрж┐рж░ ржкрзБржд ржПрж╕ржм ржЫрж╛рзЬрж╛ ржЦрж╛ржиржХрж┐рж░ ржкрзЛрж▓рж╛ ржХрж┐ ржкрж╛рж░ржЫ, ржЖржорж┐ рждрзЛрж░ ржЖржмрзНржмрзБ ржЖржЗржпрж╝рж╛ ржкрж░ржЫрж┐ ржЖржорж╛рж░ ржкрж╛ ржЪрзЗржЯрзЗ ржорж╛ржл ржЪрж╛ ржорж╛ржл ржХрж░рзЗ ржжрж┐ржмтШая╕ПЁЯМЪ",
      "рждрзЛрж░ ржЖржмрзНржмрзБрж░ ржПрж░ ржирж╛ржо ржирж┐рзЯрзЗ ржЖрж░ ржХрждрзЛ ржЪрж▓ржмрж┐ ржЧрж░рж┐ржмрзЗрж░ ржмрж╛ржЪрзНржЪрж╛ ржлржХрж┐ржирзНржирж┐рж░ ржЫрзЗрж▓рзЗ ржЯрзБржХрж╛ржЗ ржПрж░ ржмрж╛ржЪрзНржЪрж╛ЁЯдгЁЯМЪ",
      "ржлржХрж┐ржирзНржирж┐рж░ ржкрзЛрж▓рж╛ ржЯрж┐ржирзЗрж░ ржШрж░рзЗрж░ ржорзБржЪрж┐ ржЖржорж╛рж░ рж╣рзЛрж▓ ржЪрзБрж╖рж╛ ржорж╛ржЧрж┐ЁЯдг", "рждрзЛрж░ ржорж╛рж░ ржХрж╛ржирж╛ржпрж╝ ржмрж╛рж▓рзБ ржжрж┐ржпрж╝рж╛ рзмрзБржжрж┐ рзйрзмрзл ржжрж┐ржиЁЯТЛЁЯСЕ", 
      "рждрж░ ржорж╛рж░рзЗ рззрзи ржорж╛рж╕ ржЪрзБржжрзЗ ржЧрзЗрж▓рзЗржУ ржУрж░ ржнрзЛржжрж╛рж░ ржХрж┐ржЫрзБ рж╣ржмрзЗ ржирж╛ ЁЯШ╣ЁЯТеЁЯж╢",
      "ржЦрж╛ржиржХрж┐рж░ ржкрзЛрж▓рж╛ рж╕рж┐ржи ржирж╛ ржжрж┐рж▓рзЗ рждрзЛрж░ ржорж╛рж░ ржмрзЛржжрж╛ ржХрж╛ржоржбрж╝рж╛ржпрж╝рж╛ ржЦрзЗржпрж╝рзЗ ржлрзЗрж▓ржмрзЛред ЁЯСЕЁЯШВ",
      "рждрзЛрж░ ржорж╛рж░рзЗ ржЪрзБржЗржжрж╛ ржЬрзАржмржирзЗрж░ рж╕ржмржЪрж╛ржЗрждрзЗ ржмржбрж╝ ржнрзБрж▓ ржХрж░ржЫрж┐рж▓рж╛ржоред ЁЯЩВЁЯШЭ",
      "рждрж░ ржорж╛рж░рзЗ ржЬржиржЧржгрзЗрж░ ржоржзрзНржпрзЗ ржлрж╛рж▓рж╛ржЗржпрж╝рж╛ ржЪрзЛржжржмрзЛ ЁЯШ╣ЁЯСЛ",
      "рждрзЛрж░ ржорж╛ржпрж╝рж░рзЗ ржЙржбрж╝ржирзНржд тЬИя╕П ржмрж┐ржорж╛ржирзЗ ржШрзБржорж╛ржирзЛ ржЕржмрж╕рзНржерж╛рзЯ ржЪрзБржжрж┐ЁЯСЕЁЯЦХ",
      "рждрзЛрж░ ржорж╛рж░рзЗ ржкрж╛ржХрж┐рж╕рзНрждрж╛ржирзЗрж░ рж╕рж╛ржмрзЗржХ ржкрзНрж░рзЗрж╕рж┐ржбрзЗржирзНржЯ ржЯрзНрж░рж╛ржорзНржк ржкрзНрж░рж╢рж╛рж╕ржи рж╕рзЗржЬрзЗ ржЪрзБржжрж┐", 
      "рждрзЛрж░ ржорж╛рж░ ржжрзБржЗ ржкрж╛ ржХрж╛ржирзНржжрзЗ рждрзБрж▓рзЗ рждрзЛржорж╛ржХрзЗ ржПржоржи ржЪ**** рж╕рзНржЯрж╛ржЗрж▓ ржЪрзЛржжржмрзЛ ржорж┐ржпрж╝рж╛ ржЦрж▓рж┐ржлрж╛ ржмрж▓ржмрзЗ ржПржЯрж╛ ржирждрзБржи рж╕рзНржЯрж╛ржЗрж▓!!! ЁЯдгЁЯШ╣ЁЯлж", 
    "ржорж╛ржШрж┐рж░ ржкрзБрж▓рж╛ рждрзБржЗ ржХрж╛рж░ рж▓ржЧрзЗ рж▓рж╛ржЧрждрзЗ ржЖрж╕ржЫрж┐рж╕ ржЖржорж┐ рждрзЛрж░ ржорж╛рж░рзЗ рзйрзмрзл ржжрж┐ржи ржЪрзБржЗржжрж╛ рззрзо ржЗржирзНржЪрж┐ ржзржи ржжрж┐ржпрж╝рж╛ ржЖржорж╛рж░ ржХржерж╛ рж╢рзБржи ржоржи ржжрж┐ржпрж╝рж╛ рждрзЛрж░ ржорж╛рж░ ржнрзЛржжрж╛ржпрж╝ ржкрзЗржЯрзНрж░рзЛрж▓ ржжрж┐рзЯрзЗ ржЪрзБржжрж┐ЁЯл╡ЁЯлж", 
    "ржорж╛ржжрж╛рж░ржЪрзЛржж рждрзБржЗ ржирж╛ржХрж┐ virtual er top ржЖржорж┐ ржЪрж▓рзЗ ржЖрж╕ржЫрж┐ рждрзЛрж░рзЗ ржЪрзБржЗржжрж╛ рждрзЛрж░ ржкрзБржЯржХрж┐ ржжрж┐ржпрж╝рзЗ ржмрзЗрж░ ржХрж░ржорзБ ржШрж╕ ржШрж╕рж╛ рж░рж╕ЁЯлбЁЯдЩ", 
      "ржмрж░рж╛ржмрж░ рждрзЛрж░ ржорж╛рж░рзЗ ржЪрзБржжрж┐ ржмрж┐рж╖ржЗ рждрзЛржорж╛рж░ ржорж╛рж░ ржнрзБржжрж╛ ржлрж╛ржЯрж╛ржирзБрж░ ржЬржирзНржп ржЖржмрзЗржжржи, ржЬржирж╛ржм ржЦрж╛ржиржХрж┐рж░ ржкрзБрж▓рж╛ рждрзЛрж░ ржорж╛рж░ ржХрж╛рж▓рж╛ ржнрзБржжрж╛ржпрж╝ ржУржпрж╝рж╛ржХ ржерзБЁЯдгЁЯдоЁЯдв", 
      "ржкрж╛ржХрж┐рж╕рзНрждрж╛ржХрзЗ ржорж┐рж╕рж╛ржЗрж▓ рж░ржХрзЗржЯ ржХрж░рзЗ ржПржирзЗ рждрзЛрж░ ржорж╛рж░ ржнрзЛржжрж╛рж░ ржорж╛ржЬржЦрж╛ржирзЗ ржирж┐ржХрзНрж╖рзЗржк ржХрж░ржмрзЛ ЁЯТЖтАНтЩАя╕ПЁЯШ╣ЁЯл╢..", 
      "ржкрж╛ржХрж┐рж╕рзНрждрж╛ржи ржерзЗржХрзЗ ржорж┐рж╕рж╛ржЗрж▓ рж░ржХрзЗржЯ ржХрж░рзЗ ржПржирзЗ рждрзЛрж░ ржорж╛рж░ ржнрзЛржжрж╛рж░ ржорж╛ржЬржЦрж╛ржирзЗ ржирж┐ржХрзНрж╖рзЗржк ржХрж░ржмрзЛ ЁЯТЖтАНтЩАя╕ПЁЯШ╣..", 
      "тАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОтАОрждрзЛрж░ ржмрзЛржирж░рзЗ ржЪрзБржжрж┐ ржЪрзБржжрж┐ рждрзЛрж░ ржмржЙрж░рзЗ рж░рж╛рждрзНрж░рж┐ рж╣рж▓рзЗ ржЦржмрж░ ржжрж┐рж╕ ржЪрзБржжрзЗ ржЖрж╕ржм ржЕржкрзЗржирзЗ ЁЯдЩЁЯЩВ", 
      "рждрзЛрж░рзЗ ржЪрзБржЗржжрж╛ ржЪрзБржЗржжрж╛ рждрзЛрж░ ржкрзБржЯржХрж┐ ржХрж░ржорзБ рж▓рж╛рж▓, рждрзБржЗ ржЖржорж╛рж░ ржЬрж╛рж░ржЬ ржЫрзЗрж▓рзЗ рждрзЛрж░ ржорж╛ ржЖржорж╛рж░ ржпрзМржмржирзЗрж░ ржорж╛рж▓ЁЯл╢ЁЯТЦ", 
      "ржкрж╛ржХрж┐рж╕рзНрждрж╛ржи ржерзЗржХрзЗ ржорж┐рж╕рж╛ржЗрж▓ рж░ржХрзЗржЯ ржХрж░рзЗ ржПржирзЗ рждрзЛрж░ ржорж╛рж░ ржнрзЛржжрж╛рж░ ржорж╛ржЬржЦрж╛ржирзЗ ржирж┐ржХрзНрж╖рзЗржк ржХрж░ржмрзЛЁЯШ╛ЁЯл╢ЁЯСЕ", 
      "рждрзЛржорж╛рж░ ржорж╛рж░рзЗ ржЪрзБржжрж┐ ржЖржХрж╛рж╢рзЗ ржмрж╛рждрж╛рж╕рзЗ ЁЯл╢ЁЯдг", 
      "рж╢рзБрзЯрзЛрж░рзЗрж░ ржмрж╛ржЪрзНржЪрж╛ рждрзЛрж░ ржорж╛рж░рзЗ рзйрзмрзл ржжрж┐ржи ржЪрзБржжрж┐ ржорзБржЦрзЗрж░ ржоржзрзНржпрзЗ ржЖржорж╛рж░ рзнрзи рж▓рж╛ржЦ ржврзБржХрж╛ржЗ ржжрзЗржЗЁЯл╢ЁЯШ╗", "ржЯрзЗржХрзНрж╕ржЯ ржХрж╛ржорж▓рж╛ рзмрзБржжрж┐ ржирж╛ ржнржЗрж░рж╛ ржжрж┐ржорзБ рждрзЛрж░рзЗ рждрзЛрж░ ржорж╛рж░ ржнрзБржжрж╛ржпрж╝ЁЯл╢ЁЯлж", 
      "ржХрзБрждрзНрждрж╛рж░ ржмрж╛ржЪрзНржЪрж╛ ЁЭРТЁЭРЗЁЭРвЁЭРЫЁЭРеЁЭРо рждрзЛрж░ ржорж╛рж░рзЗ ржЪрзБржЗржжрж╛ ржнрзБрж▓ ржХрж░ржЫрзЗЁЯШ╜", "ржЦрж╛*ржиржХрж┐рж░ ржкрзБрж▓рж╛ ржЖржмрзНржмрзБ ржбрж╛ржХ ржорж╛ржл ржХрж░рзЗ ржжрж┐ржорзБЁЯШ╕ЁЯдЮ",
      "рж╕рж╛рж▓рж╛ MC ЁЭРТЁЭРЗЁЭРвЁЭРЫЁЭРеЁЭРо рждрзЛрж░ ржорж╛рж░рзЗ рзйрзмрзл ржжрж┐ржи ржЪрзБржжрзЗЁЯСЕЁЯЦХ", 
      "ржЦрж╛ржиржХрж┐рж░ ржЫрзЗрж▓рзЗ ЁЭРТЁЭРЗЁЭРвЁЭРЫЁЭРеЁЭРо рждрзЛрж░ ржорж╛рж░рзЗ ржЪрзБржЗржжрж╛ ржнрзБрж▓ ржХрж░ржЫрзЗЁЯШ╜",
      "ржХрзБрждрзНрждрж╛рж░ ржХрж╛ржЫрзЗ рзмрзБржжрж╛ ржЦрж╛*ржиржХрж┐рж░ ржкрзБрж▓рж╛ ЁЯШ╣ЁЯЦХЁЯСЕ", 
      "ржПржВ ржХрж╛ржЯрж╛ ржмрзЗржВ ржХрж╛ржЯрж╛ ЁЭРТЁЭРЗЁЭРвЁЭРЫЁЭРеЁЭРо рж░рзЗ ржЖржмрзНржмрзБ ржирж╛ ржбрж╛ржХрж▓рзЗ рждрзЛрж░ ржорж╛рж░ ржнрзБржжрж╛ ржХрж╛ржЯрж╛ЁЯСЕЁЯМЪ", 
      "ржЖржорж┐ ржерж╛ржХрж┐ ржЙржорж╛ржирзЗ рждрзЛрж░ ржорж╛рж░рзЗ рзмрзБржжржорзБ ржмрж┐ржорж╛ржирзЗЁЯШ╕ЁЯдЮ", "ржЖржмрзНржмрж╛ ржбрж╛ржХ ржорж╛ржл ржХрж░рзЗ ржжрж┐ржм рждрзЛрж░рзЗ, ржПржЦржиржЗ ржЖржмрзНржмрзБ ржбрж╛ржХ"
    ];

    activeFun.set(event.threadID, true);
    message.reply("ржорзБрж░ржЧрзА ржХрзЗ ржЪрзВржжрж╛ рж╢рзБрж░рзБ ржХрж░рж▓рж╛ржо SHiblu ржнрж╛ржЗ");

    let count = 0;
    const limit = 100; // ржХрзЯржЯрж╛ ржорзЗрж╕рзЗржЬ ржжрж┐ржмрзЗ рждрж╛рж░ рж▓рж┐ржорж┐ржЯ

    while (activeFun.get(event.threadID) && count < limit) {
      for (const msg of messages) {
        if (!activeFun.get(event.threadID)) break;

        await message.reply({
          body: `${msg} ${name}`,
          mentions: tag
        });

        count++;
        if (count >= limit) break;
        await delay(3000); // ржкрзНрж░рждрж┐ ржорзЗрж╕рзЗржЬрзЗрж░ ржорж╛ржЭрзЗ рзй рж╕рзЗржХрзЗржирзНржб ржЧрзНржпрж╛ржк (рж╕рзЗржл ржерж╛ржХрж╛рж░ ржЬржирзНржп)
      }
    }

    activeFun.delete(event.threadID);
    message.reply("ЁЭРТЁЭРЗЁЭРвЁЭРЫЁЭРеЁЭРо рж░рзЗ ржЖржмрзНржмрзБ ржбрж╛ржХ ржорж╛ржл ржХржЗрж░рж╛ ржжрж┐ржорзБ тШая╕ПЁЯЦХ!");
  }
};
